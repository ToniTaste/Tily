<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8" />
  <title>Tily – die Blockly-Fliesenlegerin</title>
  <link rel="stylesheet" href="style.css">
  <!-- Blockly 11.x -->
  <script src="./scripts/org/blockly_compressed.js"></script>
  <script src="./scripts/org/blocks_compressed.js"></script>
  <script src="./scripts/org/javascript_compressed.js"></script>
  <script src="./scripts/org/de.js"></script>
  <script src="./scripts/org/field_colour.js"></script>
</head>
<body>
  <h1>Tily – die Blockly-Fliesenlegerin</h1>

  <div id="settingsRow">
    <label for="rows">Zeilen:</label>
    <input id="rows" type="number" min="1" value="11" style="width:3rem;" disabled>
    <label for="cols">Spalten:</label>
    <input id="cols" type="number" min="1" value="11" style="width:3rem;" disabled>

    <label for="startSelect">Startposition:</label>
    <select id="startSelect" style="width: 12rem;" disabled>
      <option value="tl">↖︎ oben links</option>
      <option value="tr">↗︎ oben rechts</option>
      <option value="bl" selected>↙︎ unten links</option>
      <option value="br">↘︎ unten rechts</option>
      <option value="center">◎ Mitte</option>
    </select>

    <button id="settingsBtn" onclick="toggleSettings()">✏️ Bearbeiten</button>
  </div>

  <!-- Hauptlayout -->
  <div id="mainLayout">
    <!-- Blockly-Arbeitsfläche -->
    <div id="blocklyDiv"></div>

    <!-- Steuer-Elemente mittig -->
    <div id="controls">
      <div class="slider-col">
        <span class="speed-icon">🐎</span>
        <input type="range" id="timeoutSlider" min="5" max="100" step="5" value="50"
          orient="vertical" title="Geschwindigkeit einstellen: oben = schneller, unten = langsamer"/>
        <span class="speed-icon">🐢</span>
      </div>

      <button id="btnStart" onclick="startRun()" title="Start">▶️</button>
      <button id="btnStop" onclick="stoppAll()" title="Abbruch">⏹️</button>
      <button id="btnStep" onclick="startStep()" title="Einzelschritt">⏯️</button>
      <button id="btnReset" onclick="resetProgram()" title="Blöcke zurücksetzen">↩️</button>
      <button id="btnReload" onclick="reloadAll()" title="Alles zurücksetzen">🔁</button>
    </div>

    <!-- Canvas rechts -->
    <canvas id="tileCanvas"></canvas>
  </div>

  <!-- Untere Buttonreihe -->
  <div id="bottomControls">
    <button id="btnLoad">📂 Programm laden</button>
    <input type="file" id="xmlInput" accept=".xml" style="display:none;" />
    <button id="btnSave">💾 Programm speichern</button>
    <button onclick="tile_download_portable('board')">🖼️ Bild speichern</button>
  </div> 

  <xml id="toolbox" style="display:none">
    <block type="tile_go"></block>
    <block type="tile_fill"></block>
    <block type="custom_repeat"></block>
  </xml>

  <script src="./scripts/blocks.js"></script>
  <script src="./scripts/generator.js"></script>
  <script src="./scripts/tile.js"></script>
  <script src="./scripts/main.js"></script>
  
  
</body>
</html>
